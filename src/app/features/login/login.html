
<div class="relative flex min-h-screen w-full flex-col overflow-hidden bg-background-dark font-display text-white">
  
  <!-- Abstract Molecular Background -->
  <div class="absolute inset-0 z-0 opacity-20 pointer-events-none transition-opacity duration-1000">
    <div class="w-full h-full bg-cover bg-center animate-pulse" 
         [style.backgroundImage]="bgImage">
    </div>
    <div class="absolute inset-0 bg-gradient-to-b from-[#111828]/80 via-[#111828]/90 to-[#111828]"></div>
  </div>

  <!-- Main Content Wrapper -->
  <div class="relative z-10 flex flex-col flex-1 px-6 pt-12 pb-8 max-w-md mx-auto w-full justify-between h-full">
    
    <!-- Dynamic Content Area -->
    @switch (currentView()) {
      
      <!-- CASE: WELCOME SCREEN -->
      @case ('welcome') {
        <div class="flex flex-col h-full animate-in fade-in zoom-in duration-500">
          
          <!-- Top Section: Logo & Headline -->
          <div class="flex flex-col items-center flex-1 justify-center mt-4">
            <!-- Logo Area with Glow -->
            <div class="relative mb-8 group cursor-pointer" (click)="navigateTo('login')">
              <div class="absolute inset-0 bg-primary rounded-full blur-3xl opacity-20 group-hover:opacity-40 transition-opacity duration-700"></div>
              <div class="relative w-36 h-36 bg-surface-dark rounded-3xl border border-white/10 shadow-2xl flex items-center justify-center overflow-hidden transform group-hover:scale-105 transition-transform duration-500">
                <div class="w-full h-full bg-cover bg-center opacity-90" [style.backgroundImage]="flaskImage"></div>
              </div>
              <!-- Decorative Atom Icon Overlay -->
              <div class="absolute -bottom-3 -right-3 bg-primary text-white p-2 rounded-xl shadow-lg border-4 border-background-dark group-hover:rotate-12 transition-transform duration-300">
                <span class="material-symbols-outlined text-[28px]">science</span>
              </div>
            </div>

            <!-- Text Content -->
            <div class="text-center space-y-4">
              <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-white leading-[1.1]">
                Bienvenido al <br/>
                <span class="text-primary text-glow inline-block mt-1">Laboratorio</span>
              </h1>
              <p class="text-slate-400 text-lg font-medium leading-relaxed max-w-[280px] mx-auto">
                Domina la quÃ­mica paso a paso en tu propio entorno digital.
              </p>
            </div>
          </div>

          <!-- Bottom Section: Actions -->
          <div class="w-full flex flex-col gap-4 mb-4 mt-8">
            <!-- Primary Button -->
            <button (click)="navigateTo('register')" class="relative w-full group overflow-hidden rounded-xl bg-primary h-14 shadow-[0_4px_20px_rgba(0,163,131,0.25)] transition-all active:scale-[0.98]">
              <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-out"></div>
              <span class="relative flex items-center justify-center gap-2 text-white font-bold text-lg tracking-wide">
                Registrarse
                <span class="material-symbols-outlined text-[20px]">arrow_forward</span>
              </span>
            </button>

            <!-- Secondary Button -->
            <button (click)="navigateTo('login')" class="w-full flex items-center justify-center rounded-xl h-14 bg-surface-dark border border-white/5 hover:bg-white/5 text-primary font-bold text-lg transition-all active:scale-[0.98]">
              Iniciar SesiÃ³n
            </button>
            
            <!-- Social Login Block -->
            <div class="mt-2">
               <div class="relative flex py-4 items-center">
                  <div class="flex-grow border-t border-white/10"></div>
                  <span class="flex-shrink-0 mx-4 text-slate-500 text-sm font-medium">O continÃºa con</span>
                  <div class="flex-grow border-t border-white/10"></div>
              </div>
              
              <div class="grid grid-cols-2 gap-4">
                  <button class="flex items-center justify-center gap-3 h-12 bg-surface-dark hover:bg-white/5 rounded-lg border border-white/5 transition-colors group">
                      <svg class="w-5 h-5 group-hover:scale-110 transition-transform" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.766 12.2764C23.766 11.4607 23.6999 10.6406 23.5588 9.83807H12.24V14.4591H18.7217C18.4528 15.9494 17.5885 17.2678 16.323 18.1056V21.1039H20.19C22.4608 19.0139 23.766 15.9274 23.766 12.2764Z" fill="#4285F4"></path><path d="M12.24 24.0008C15.4766 24.0008 18.2059 22.9382 20.1945 21.1039L16.3275 18.1055C15.2517 18.8375 13.8627 19.252 12.2445 19.252C9.11388 19.252 6.45946 17.1399 5.50705 14.3003H1.5166V17.3912C3.55371 21.4434 7.7029 24.0008 12.24 24.0008Z" fill="#34A853"></path><path d="M5.50253 14.3003C5.00236 12.8099 5.00236 11.1961 5.50253 9.70575V6.61481H1.5166C-0.18551 10.0056 -0.18551 14.0004 1.5166 17.3912L5.50253 14.3003Z" fill="#FBBC05"></path><path d="M12.24 4.74966C13.9509 4.7232 15.6044 5.36697 16.8434 6.54867L20.2695 3.12262C18.1001 1.0855 15.2208 -0.0344664 12.24 0.000808666C7.7029 0.000808666 3.55371 2.55822 1.5166 6.61481L5.50253 9.70575C6.45064 6.86173 9.10947 4.74966 12.24 4.74966Z" fill="#EA4335"></path></svg>
                      <span class="text-sm font-semibold text-white/90">Google</span>
                  </button>
                  <button class="flex items-center justify-center gap-3 h-12 bg-surface-dark hover:bg-white/5 rounded-lg border border-white/5 transition-colors group">
                      <svg class="w-5 h-5 text-white group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 24 24"><path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.74 1.18 0 2.45-1.62 4.37-1.54 1.81.07 3.2 1.43 3.65 2.1-3.23 1.93-2.6 6.22 1.15 7.74-.53 1.6-1.55 3.16-2.58 4.14-1.06 1.05-1.92 1.99-1.67 1.79zm-4.52-16c.32 1.73-1.05 3.31-2.45 3.42-.51-1.76 1.4-3.5 2.45-3.42z"></path></svg>
                      <span class="text-sm font-semibold text-white/90">Apple</span>
                  </button>
              </div>
            </div>

            <p class="text-center text-xs text-slate-600 mt-2">
                Al registrarte, aceptas nuestros <a href="#" class="text-primary/80 hover:text-primary transition-colors">TÃ©rminos</a> y <a href="#" class="text-primary/80 hover:text-primary transition-colors">Privacidad</a>.
            </p>
          </div>
        </div>
      }

      <!-- CASE: LOGIN SCREEN -->
      @case ('login') {
        <div class="flex flex-col h-full animate-in slide-in-from-right duration-500">
          <div class="flex-1 flex flex-col justify-center">
             <!-- Header with Back Button -->
             <div class="mb-8">
               <button (click)="navigateTo('welcome')" class="text-slate-400 hover:text-white transition-colors flex items-center gap-2 mb-6">
                 <span class="material-symbols-outlined text-[20px]">arrow_back</span>
                 <span>Volver</span>
               </button>
               <h2 class="text-3xl font-bold text-white mb-2">Hola de nuevo ðŸ‘‹</h2>
               <p class="text-slate-400">Ingresa tus credenciales para continuar.</p>
             </div>

             <!-- Form -->
             <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="space-y-5">
                <div class="space-y-1">
                  <label class="text-sm font-semibold text-slate-300 ml-1">Email</label>
                  <div class="relative">
                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 material-symbols-outlined text-[20px]">mail</span>
                    <input type="email" formControlName="email" 
                           class="w-full h-14 bg-surface-dark border border-white/10 rounded-xl pl-12 pr-4 text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all"
                           placeholder="ejemplo@correo.com">
                  </div>
                   @if (loginForm.get('email')?.touched && loginForm.get('email')?.invalid) {
                      <p class="text-red-400 text-xs ml-1 mt-1">Ingresa un email vÃ¡lido.</p>
                   }
                </div>

                <div class="space-y-1">
                  <label class="text-sm font-semibold text-slate-300 ml-1">ContraseÃ±a</label>
                  <div class="relative">
                     <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 material-symbols-outlined text-[20px]">lock</span>
                    <input type="password" formControlName="password"
                           class="w-full h-14 bg-surface-dark border border-white/10 rounded-xl pl-12 pr-4 text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all"
                           placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                  </div>
                   @if (loginForm.get('password')?.touched && loginForm.get('password')?.invalid) {
                      <p class="text-red-400 text-xs ml-1 mt-1">La contraseÃ±a es requerida.</p>
                   }
                </div>
                
                <div class="flex justify-end">
                  <a href="#" class="text-sm text-primary hover:text-white transition-colors">Â¿Olvidaste tu contraseÃ±a?</a>
                </div>

                <button type="submit" class="relative w-full group overflow-hidden rounded-xl bg-primary h-14 shadow-[0_4px_20px_rgba(0,163,131,0.25)] transition-all active:scale-[0.98] mt-4">
                  <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-out"></div>
                  <span class="relative flex items-center justify-center gap-2 text-white font-bold text-lg tracking-wide">
                    Acceder
                  </span>
                </button>
             </form>
          </div>
          
           <div class="mt-auto pt-6 text-center">
             <p class="text-slate-400">Â¿No tienes cuenta? <button (click)="navigateTo('register')" class="text-primary font-semibold hover:underline">RegÃ­strate</button></p>
           </div>
        </div>
      }

      <!-- CASE: REGISTER SCREEN -->
      @case ('register') {
        <div class="flex flex-col h-full animate-in slide-in-from-right duration-500">
           <div class="flex-1 flex flex-col justify-center">
             <!-- Header with Back Button -->
             <div class="mb-6">
               <button (click)="navigateTo('welcome')" class="text-slate-400 hover:text-white transition-colors flex items-center gap-2 mb-4">
                 <span class="material-symbols-outlined text-[20px]">arrow_back</span>
                 <span>Volver</span>
               </button>
               <h2 class="text-3xl font-bold text-white mb-2">Crear Cuenta ðŸ§ª</h2>
               <p class="text-slate-400">Ãšnete al laboratorio hoy.</p>
             </div>

             <!-- Form -->
             <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="space-y-4">
                <div class="space-y-1">
                  <label class="text-sm font-semibold text-slate-300 ml-1">Nombre Completo</label>
                   <div class="relative">
                     <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 material-symbols-outlined text-[20px]">person</span>
                     <input type="text" formControlName="name"
                           class="w-full h-14 bg-surface-dark border border-white/10 rounded-xl pl-12 pr-4 text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all"
                           placeholder="Juan PÃ©rez">
                   </div>
                </div>

                <div class="space-y-1">
                  <label class="text-sm font-semibold text-slate-300 ml-1">Email</label>
                  <div class="relative">
                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 material-symbols-outlined text-[20px]">mail</span>
                    <input type="email" formControlName="email"
                           class="w-full h-14 bg-surface-dark border border-white/10 rounded-xl pl-12 pr-4 text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all"
                           placeholder="ejemplo@correo.com">
                  </div>
                </div>

                <div class="space-y-1">
                  <label class="text-sm font-semibold text-slate-300 ml-1">ContraseÃ±a</label>
                  <div class="relative">
                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 material-symbols-outlined text-[20px]">lock</span>
                    <input type="password" formControlName="password"
                           class="w-full h-14 bg-surface-dark border border-white/10 rounded-xl pl-12 pr-4 text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all"
                           placeholder="Crea una contraseÃ±a segura">
                  </div>
                </div>

                <button type="submit" class="relative w-full group overflow-hidden rounded-xl bg-primary h-14 shadow-[0_4px_20px_rgba(0,163,131,0.25)] transition-all active:scale-[0.98] mt-2">
                  <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-out"></div>
                  <span class="relative flex items-center justify-center gap-2 text-white font-bold text-lg tracking-wide">
                    Comenzar Aventura
                  </span>
                </button>
             </form>
          </div>
          
           <div class="mt-auto pt-6 text-center">
             <p class="text-slate-400">Â¿Ya tienes cuenta? <button (click)="navigateTo('login')" class="text-primary font-semibold hover:underline">Inicia SesiÃ³n</button></p>
           </div>
        </div>
      }
    }
  </div>
</div>
